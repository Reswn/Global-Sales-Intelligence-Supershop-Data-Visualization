<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics ‚Äî GSI Insights</title>

    <!-- Global styles (navbar, glass, bg, dsb) -->
    <link rel="stylesheet" href="/assets/css/global.css" />

    <!-- Chart engines -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  </head>

  <body class="bg">
    <!-- NAVBAR -->
    <nav class="neon-navbar">
      <div class="nav-left"><h2 class="logo">üìä GSI Insights</h2></div>
      <div class="nav-right" id="navLinks">
        <a href="/index.html" class="nav-link">Home</a>
        <a href="/page/dashboard.html" class="nav-link">Dashboard</a>
        <a href="/page/reports.html" class="nav-link">Reports</a>
        <a href="/page/analytics.html" class="nav-link active">Analytics</a>
        <!-- <a href="support.html" class="nav-link">Support</a> -->
      </div>
      <div class="hamburger" id="hamburger">‚ò∞</div>
    </nav>

    <!-- HEADER -->
    <header class="page-header">
      <h1>üß† Advanced Analytics</h1>
      <p class="subtitle">Correlation ‚Ä¢ Forecast ‚Ä¢ RFM ‚Ä¢ Outliers ‚Ä¢ Affinity</p>
    </header>

    <div class="container mx-auto px-4 py-6" style="max-width: 1200px">
      <!-- 1) KPI INTELLIGENCE -->
      <section class="report-section show">
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
          <div class="kpi glass">
            <div class="kpi-label">Total Sales</div>
            <div id="anKpiSales" class="kpi-value">-</div>
          </div>
          <div class="kpi glass">
            <div class="kpi-label">Total Profit</div>
            <div id="anKpiProfit" class="kpi-value">-</div>
          </div>
          <div class="kpi glass">
            <div class="kpi-label">Orders</div>
            <div id="anKpiOrders" class="kpi-value">-</div>
          </div>
          <div class="kpi glass">
            <div class="kpi-label">Avg Discount</div>
            <div id="anKpiDiscount" class="kpi-value">-</div>
          </div>
          <div class="kpi glass">
            <div class="kpi-label">Cities</div>
            <div id="anKpiCities" class="kpi-value">-</div>
          </div>
        </div>

        <div class="card glass mt-6">
          <div class="card-head">
            <span class="dot cyan"></span>
            <h3>KPI Intelligence (auto-insight)</h3>
          </div>
          <p id="anKpiInsight" class="insight"></p>
        </div>
      </section>

      <!-- 2) CORRELATION MATRIX -->
      <section class="report-section">
        <div class="card glass">
          <div class="card-head">
            <span class="dot magenta"></span>
            <h3>Correlation Matrix (Sales ‚Ä¢ Profit ‚Ä¢ Discount ‚Ä¢ Quantity)</h3>
          </div>
          <div id="anCorr" style="height: 420px"></div>
          <p id="anCorrInsight" class="insight"></p>
        </div>
      </section>

      <!-- 3) FORECASTING -->
      <section class="report-section">
        <div class="card glass">
          <div class="card-head">
            <span class="dot purple"></span>
            <h3>Sales Forecast (next 6 months)</h3>
          </div>
          <div style="height: 380px"><canvas id="anForecast"></canvas></div>
          <p id="anForecastInsight" class="insight"></p>
        </div>
      </section>

      <!-- 4) RFM (City Proxy) -->
      <section class="report-section">
        <div class="card glass">
          <div class="card-head">
            <span class="dot teal"></span>
            <h3>RFM Segmentation (City proxy)</h3>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div style="height: 320px"><canvas id="anRfmBar"></canvas></div>
            <div class="glass" style="padding: 12px">
              <h4 style="margin: 8px 0 10px">
                Top 10 ‚ÄúBest‚Äù Cities (RFM score)
              </h4>
              <div id="anRfmTop" class="mini-table"></div>
            </div>
          </div>
          <p id="anRfmInsight" class="insight"></p>
        </div>
      </section>

      <!-- 5) OUTLIERS -->
      <section class="report-section">
        <div class="card glass">
          <div class="card-head">
            <span class="dot cyan"></span>
            <h3>Outlier Detection (Sales vs Profit)</h3>
          </div>
          <div style="height: 380px"><canvas id="anOutlier"></canvas></div>
          <p id="anOutlierInsight" class="insight"></p>
        </div>
      </section>

      <!-- 6) SUB-CATEGORY AFFINITY (co-occurrence by City) -->
      <section class="report-section">
        <div class="card glass">
          <div class="card-head">
            <span class="dot magenta"></span>
            <h3>Sub-Category Affinity (by City)</h3>
          </div>
          <div id="anAffinity" class="mini-table"></div>
          <p class="muted" style="margin-top: 8px">
            *Proxy basket analysis: pasangan sub-category yang sering muncul
            pada kota yang sama.
          </p>
        </div>
      </section>
    </div>

    <script src="/js/main.js"></script>
    <script src="/js/analytics.js"></script>
  </body>
</html>
